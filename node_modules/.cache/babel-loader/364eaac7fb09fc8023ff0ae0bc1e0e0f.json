{"ast":null,"code":"var _jsxFileName = \"/home/arthur/github/typing-test/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useEffect } from 'react';\nimport reducer, { Reducer } from './components/reducerComp/reducer';\nimport initialState from './components/reducerComp/initialState';\nimport getTime from './components/functions/getTime';\nimport './App.css';\nimport Title from './components/Title';\nimport ServiceMenu from './components/ServiceMenu';\nimport CurrentInfo from './components/CurrentInfo';\nimport TextArea from './components/TextArea';\nimport Result from './components/Result';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  function keyDown(e) {\n    if (!state.isStart) return;\n    if (e.key.length !== 1) return;\n    if (state.charIndex === 0) dispatch({\n      type: 'SET_STARTTIME',\n      time: getTime()\n    });\n\n    if (state.text[state.charIndex] === e.key) {\n      dispatch({\n        type: 'SET_INDEX'\n      });\n    } else if (state.text[state.charIndex] !== e.key) {\n      dispatch({\n        type: 'SET_ERROR'\n      });\n    }\n\n    dispatch({\n      type: 'SET_ACCURACY'\n    });\n    dispatch({\n      type: 'SET_SPEED',\n      speed: (state.charIndex / ((getTime() - state.startTime) / 60000)).toFixed(0)\n    });\n  }\n\n  function keyUp() {\n    if (state.charIndex === state.text.length && state.text.length !== 0) {\n      //Для дополнительного рендеринга, что бы появилось меню скрытое сразу после ввода последнего символа\n      dispatch({\n        type: 'SET_FINISH',\n        time: getTime()\n      });\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', keyDown);\n    window.addEventListener('keyup', keyUp);\n    return () => {\n      window.removeEventListener('keydown', keyDown);\n      window.removeEventListener('keyup', keyUp);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(Reducer.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: [/*#__PURE__*/_jsxDEV(Title, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this), !state.isStart && /*#__PURE__*/_jsxDEV(ServiceMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(CurrentInfo, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }, this), state.isFinish && /*#__PURE__*/_jsxDEV(Result, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(TextArea, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useReducer","useEffect","reducer","Reducer","initialState","getTime","Title","ServiceMenu","CurrentInfo","TextArea","Result","App","state","dispatch","keyDown","e","isStart","key","length","charIndex","type","time","text","speed","startTime","toFixed","keyUp","window","addEventListener","removeEventListener","isFinish"],"sources":["/home/arthur/github/typing-test/src/App.js"],"sourcesContent":["import React, { useReducer, useEffect } from 'react';\nimport reducer, { Reducer } from './components/reducerComp/reducer';\nimport initialState from './components/reducerComp/initialState';\nimport getTime from './components/functions/getTime';\nimport './App.css';\n\nimport Title from './components/Title';\nimport ServiceMenu from './components/ServiceMenu';\nimport CurrentInfo from './components/CurrentInfo';\nimport TextArea from './components/TextArea';\nimport Result from './components/Result';\n\n\nfunction App() {\n\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\tfunction keyDown(e) {\n\t\tif (!state.isStart) return\n\t\tif (e.key.length !== 1) return\n\n\t\tif (state.charIndex === 0) dispatch({type: 'SET_STARTTIME', time: getTime()})\n\t\t\n\t\tif (state.text[state.charIndex] === e.key) {\n\t\t\tdispatch({type: 'SET_INDEX'})\n\t\t} else if (state.text[state.charIndex] !== e.key) {\n\t\t\tdispatch({type: 'SET_ERROR'})\n\t\t}\n\t\t\n\t\tdispatch({type: 'SET_ACCURACY'})\n\t\tdispatch({type: 'SET_SPEED', speed: ((state.charIndex) / ((getTime() - state.startTime) / 60000)).toFixed(0)})\n    }\n\n\tfunction keyUp() {\n\t\tif (state.charIndex === state.text.length && state.text.length !== 0) {\n\t\t\t//Для дополнительного рендеринга, что бы появилось меню скрытое сразу после ввода последнего символа\n\t\t\tdispatch({type: 'SET_FINISH', time: getTime()})\n\t\t}\n\t}\n\n    useEffect(() => {\n        window.addEventListener('keydown', keyDown);\n\t\twindow.addEventListener('keyup', keyUp);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', keyDown)\n\t\t\twindow.removeEventListener('keyup', keyUp)\n\t\t}\n    })\n\n\n\treturn (\n\t\t<Reducer.Provider value={{state, dispatch}}>\n\t\t\t<Title/>\n\t\t\t{!state.isStart && <ServiceMenu/>}\n\t\t\t<CurrentInfo/>\n\t\t\t{state.isFinish && <Result/>}\n\t\t\t<TextArea/>\n\t\t</Reducer.Provider>\n\t)\n}\n\nexport default App;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,OAAOC,OAAP,IAAkBC,OAAlB,QAAiC,kCAAjC;AACA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,OAAO,WAAP;AAEA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;;AAGA,SAASC,GAAT,GAAe;EAAA;;EAEd,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBb,UAAU,CAACE,OAAD,EAAUE,YAAV,CAApC;;EAEA,SAASU,OAAT,CAAiBC,CAAjB,EAAoB;IACnB,IAAI,CAACH,KAAK,CAACI,OAAX,EAAoB;IACpB,IAAID,CAAC,CAACE,GAAF,CAAMC,MAAN,KAAiB,CAArB,EAAwB;IAExB,IAAIN,KAAK,CAACO,SAAN,KAAoB,CAAxB,EAA2BN,QAAQ,CAAC;MAACO,IAAI,EAAE,eAAP;MAAwBC,IAAI,EAAEhB,OAAO;IAArC,CAAD,CAAR;;IAE3B,IAAIO,KAAK,CAACU,IAAN,CAAWV,KAAK,CAACO,SAAjB,MAAgCJ,CAAC,CAACE,GAAtC,EAA2C;MAC1CJ,QAAQ,CAAC;QAACO,IAAI,EAAE;MAAP,CAAD,CAAR;IACA,CAFD,MAEO,IAAIR,KAAK,CAACU,IAAN,CAAWV,KAAK,CAACO,SAAjB,MAAgCJ,CAAC,CAACE,GAAtC,EAA2C;MACjDJ,QAAQ,CAAC;QAACO,IAAI,EAAE;MAAP,CAAD,CAAR;IACA;;IAEDP,QAAQ,CAAC;MAACO,IAAI,EAAE;IAAP,CAAD,CAAR;IACAP,QAAQ,CAAC;MAACO,IAAI,EAAE,WAAP;MAAoBG,KAAK,EAAE,CAAEX,KAAK,CAACO,SAAP,IAAqB,CAACd,OAAO,KAAKO,KAAK,CAACY,SAAnB,IAAgC,KAArD,CAAD,EAA8DC,OAA9D,CAAsE,CAAtE;IAA3B,CAAD,CAAR;EACG;;EAEJ,SAASC,KAAT,GAAiB;IAChB,IAAId,KAAK,CAACO,SAAN,KAAoBP,KAAK,CAACU,IAAN,CAAWJ,MAA/B,IAAyCN,KAAK,CAACU,IAAN,CAAWJ,MAAX,KAAsB,CAAnE,EAAsE;MACrE;MACAL,QAAQ,CAAC;QAACO,IAAI,EAAE,YAAP;QAAqBC,IAAI,EAAEhB,OAAO;MAAlC,CAAD,CAAR;IACA;EACD;;EAEEJ,SAAS,CAAC,MAAM;IACZ0B,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCd,OAAnC;IACNa,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCF,KAAjC;IACA,OAAO,MAAM;MACZC,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCf,OAAtC;MACAa,MAAM,CAACE,mBAAP,CAA2B,OAA3B,EAAoCH,KAApC;IACA,CAHD;EAIG,CAPQ,CAAT;EAUH,oBACC,QAAC,OAAD,CAAS,QAAT;IAAkB,KAAK,EAAE;MAACd,KAAD;MAAQC;IAAR,CAAzB;IAAA,wBACC,QAAC,KAAD;MAAA;MAAA;MAAA;IAAA,QADD,EAEE,CAACD,KAAK,CAACI,OAAP,iBAAkB,QAAC,WAAD;MAAA;MAAA;MAAA;IAAA,QAFpB,eAGC,QAAC,WAAD;MAAA;MAAA;MAAA;IAAA,QAHD,EAIEJ,KAAK,CAACkB,QAAN,iBAAkB,QAAC,MAAD;MAAA;MAAA;MAAA;IAAA,QAJpB,eAKC,QAAC,QAAD;MAAA;MAAA;MAAA;IAAA,QALD;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AASA;;GA9CQnB,G;;KAAAA,G;AAgDT,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}